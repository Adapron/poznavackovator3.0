<!DOCTYPE html>
<html>
    <head>
        <title>JSON Import/Export</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>


    <body>
        <h2>JSON Import/Export</h2>

        <div>
            <label for="input">Input:</label>
            <input type="text" id="input" name="input">
        </div>

        <br>

        <div> <!-- Buttons to import/export -->
            <button onclick="exportJSON()">Export JSON</button>
            <button onclick="importJSON()">Import JSON</button>
            <button onclick="loadDefaultJSON()">Load Default</button>
        </div>



        <script>
            const fileName = "data.json";

            function downloadJSON(json){
                var a = document.createElement('a');
                a.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(json);
                a.download = fileName;
                a.click();
            }
        
            function inputFile(){
                var inputElement = document.createElement('input');
                inputElement.type = 'file';

                inputElement.addEventListener('change', function (e) {
                    var file = e.target.files[0];
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var contents = e.target.result;
                        var data = JSON.parse(contents);
                        return(data);

                        document.getElementById('input').value = input;
                    };

                    reader.readAsText(file);
                });

                inputElement.click();
            }
        
            function loadJSON(file){
                fetch(file)
                    .then(response => response.json())
                    .then(data => {
                        return(data);
                    })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
            
            function exportJSON() {
                //get the input
                var input = document.getElementById('input').value;

                //construct the object
                var data = {
                    "input": input
                };

                //convert to JSON
                var json = JSON.stringify(data, null, 2); 

                downloadJSON(json);
                
            }

            function importJSON() {
                var data = inputFile();
                var input = data.input;
            }

            function loadDefaultJSON() {
                var data = loadJSON("default.json");
                var input = data.input;
                document.getElementById('input').value = input;
            }       


        </script>
    </body>
</html>
