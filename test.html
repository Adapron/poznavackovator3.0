<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Squares</title>
<style>
    table {
        border-collapse: collapse;
    }
    td {
        width: 50px;
        height: 50px;
        border: 1px solid black;
        text-align: center;
    }
    .active {
        background-color: lightblue;
    }
    .arrow {
        position: absolute;
        z-index: 1;
    }
</style>
</head>
<body>

<table id="squareTable"></table>

<script>
    const n = 5; // Change this value to adjust the size of the grid
    let activeRow, activeCol;

    function createTable() {
        const table = document.getElementById('squareTable');
        for (let i = 0; i < n; i++) {
            const row = table.insertRow();
            for (let j = 0; j < n; j++) {
                const cell = row.insertCell();
                cell.id = `cell-${i}-${j}`;
                cell.addEventListener('mouseover', () => {
                    setActiveSquare(i, j);
                });
            }
        }
        setActiveSquare(Math.floor(n / 2), Math.floor(n / 2));
    }

    function setActiveSquare(row, col) {
        if (activeRow !== undefined && activeCol !== undefined) {
            const activeCell = document.getElementById(`cell-${activeRow}-${activeCol}`);
            activeCell.classList.remove('active');
        }
        activeRow = row;
        activeCol = col;
        const activeCell = document.getElementById(`cell-${activeRow}-${activeCol}`);
        activeCell.classList.add('active');
        generateButtons(row, col);
    }

    function generateButtons(row, col) {
        const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];
        const table = document.getElementById('squareTable');
        directions.forEach(([dx, dy]) => {
            const newRow = row + dx;
            const newCol = col + dy;
            if (newRow >= 0 && newRow < n && newCol >= 0 && newCol < n) {
                const adjacentCell = document.getElementById(`cell-${newRow}-${newCol}`);
                if (adjacentCell && !adjacentCell.querySelector('button')) {
                    const button = document.createElement('button');
                    button.innerText = 'Go';
                    button.addEventListener('click', () => {
                        setActiveSquare(newRow, newCol);
                        drawArrow(row, col, newRow, newCol);
                    });
                    adjacentCell.appendChild(button);
                }
            }
        });
    }

    function drawArrow(fromRow, fromCol, toRow, toCol) {
        const arrow = document.createElement('div');
        arrow.classList.add('arrow');
        const fromCell = document.getElementById(`cell-${fromRow}-${fromCol}`);
        const toCell = document.getElementById(`cell-${toRow}-${toCol}`);
        const tableRect = document.getElementById('squareTable').getBoundingClientRect();
        const fromRect = fromCell.getBoundingClientRect();
        const toRect = toCell.getBoundingClientRect();
        arrow.style.top = (fromRect.top - tableRect.top + fromRect.height / 2) + 'px';
        arrow.style.left = (fromRect.left - tableRect.left + fromRect.width / 2) + 'px';
        const angle = Math.atan2(toRect.top - fromRect.top, toRect.left - fromRect.left) * 180 / Math.PI;
        arrow.style.transform = `rotate(${angle}deg)`;
        document.body.appendChild(arrow);
        setTimeout(() => {
            arrow.remove();
        }, 1000);
    }

    createTable();
</script>


</body>
</html>
